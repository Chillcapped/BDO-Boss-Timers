<dom-module id="boss-info">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>
    <iron-ajax url="{{bossDataUrl}}" on-response="bossDataResponse"></iron-ajax>
    <iron-ajax url="/api/channels" on-response="channelResponse"></iron-ajax>

    <template is="dom-if" if="{{boss}}">
      <section id="bossInfoContainer">
          <h4>Boss Info</h4>
          <iron-image src="[[boss.image]]"></iron-image>
          <section class="bossInfoInner">
            <section class="bossDescription">
              <h4>Description</h4>
              <p>[[boss.description]]</h4>
            </section>
            <section class="bossDrop">
              <h4>Drops</h4>
            </section>
            <section class="bossKnowledge">
              <h4>Knowledge NPCs</h4>
            </section>
          </section>
      </section>
    </template>
  </template>
  <script>
    Polymer({
      is: "boss-info",
      properties: {
        params: {
          type: Object,
          notify: true
        },
        boss: {
          type: Object,
          notify: true,
          observer: "bossChanged",
          value: {
            'name': 'Bheg',
            'description': '',
            'images': [],
            'background': '',
            'drops': [],
            'timer': {
              'lastKill': '',
              'window': {
                'active': false,
                'start': '',
                'stop': ''
              }
            }
          }
        },
        channels: {
          type: Array,
          notify: true,
          observer: "channelChanged"
        }
      },
      bossChanged: function(e){
        console.log(e);
      },
      channelChanged: function(e){
        console.log(e);
      },
      channelResponse: function(e){
        console.log(e.detail.response);
      }
    })
  </script>
</dom-module>
